(window.webpackJsonp=window.webpackJsonp||[]).push([[18,7],{477:function(e,t,l){"use strict";l.r(t);var n={props:["headers","repayments","loading","search","dense","dark","amount","ttInterest","ttBalance"]},r=l(25),o=l(32),c=l.n(o),d=l(559),v=l(462),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("v-data-table",{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.repayments,"items-per-page":15,search:e.search,dense:e.dense,dark:e.dark,"multi-sort":"",loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"top",fn:function(){return[l("v-row",{attrs:{"no-gutters":""}},[l("h3",{staticClass:"font-weight-black"},[e._v("Repayment schedule")])])]},proxy:!0},e.$vuetify.breakpoint.smAndUp?{key:"body.append",fn:function(){return[l("tr",{staticClass:"table_footer"},[l("td",[e._v("Total#")]),e._v(" "),l("td"),e._v(" "),l("td",[l("p",{staticClass:"font-weight-black"},[e._v(e._s(e.amount))])]),e._v(" "),l("td"),e._v(" "),l("td",[l("p",{staticClass:"font-weight-black"},[e._v(e._s(e.ttInterest))])]),e._v(" "),l("td"),e._v(" "),l("td",[l("p",{staticClass:"font-weight-black"},[e._v(e._s(e.ttBalance))])])])]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null);t.default=component.exports;c()(component,{VDataTable:d.a,VRow:v.a})},485:function(e,t,l){var content=l(510);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(11).default)("0797c046",content,!0,{sourceMap:!1})},509:function(e,t,l){"use strict";l(485)},510:function(e,t,l){var n=l(10)(!1);n.push([e.i,"pa-sm-2[data-v-06d6df07]{text-align:center}",""]),e.exports=n},564:function(e,t,l){"use strict";l.r(t);var n=l(477),r={layout:null==localStorage.getItem("qAccessToken")?"fault":"Home",components:{DatatableComponent:n.default},data:function(){return{valid:!0,title:"Home",dense:!0,t:null==localStorage.getItem("qAccessToken"),dark:!1,dialog:!1,advanced:!1,name:null,interest_methods:["FLAT","STRAIGHT","REDUCING_BALANCE"],amortization_methods:["EQUAL_INSTALLMENT","EQUAL_PRINCIPAL"],datarequired:!0,ttInterest:"",ttBalance:"",loan_terms:[{name:"Days",value:1},{name:"Weeks",value:7},{name:"Months",value:30},{name:"Year",value:366}],iterest_methods:[{name:"Flat",value:1},{name:"Reducing Balance",value:2},{name:"Straight Method",value:3}],amortizations:["Equal Installment","Equal principal"],headers:[{text:this.$t("label.heading.Day"),align:"left",sortable:!1,value:"days"},{text:this.$t("label.heading.Paid Date"),value:"paiddate"},{text:this.$t("label.heading.Principal"),value:"loanamount"},{text:this.$t("label.heading.Principal due"),value:"principaldue"},{text:this.$t("label.heading.Interest"),value:"interest",filterable:!1},{text:this.$t("label.heading.Loan Balance"),value:"loanbalance"},{text:this.$t("label.heading.Total"),value:"total",filterable:!1}],repayments:[],method:{},value_frequency:{},value_loan_amount:"",value_interest_rate:"",value_loan_term:"",value_interest_free_period:"",value_num_of_repayments:"",value_repayments_freq:"",value_amortization:"",value_interest_moratorium:"",value_principal_moratorium:"",value_loan_term_unit:{},value_repayment_freq_unit:{},loading:!1,search:"",valueRules:[function(e){return!!e||"Value is required"},function(e){return e&&e.length<=1||"Value must be less than 2 characters"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=10||"Name must be less than 10 characters"}],numberRules:[function(e){return!!e||"Invalid value"}]}},head:function(){return{title:"Calculator"}},methods:{calculate:function(){var e=this;this.$refs.form.validate()&&(this.datarequired=!1,this.loading=!0,this.$nextTick((function(){var t=[],l=e.value_interest_rate/100;if(1==e.method.value){var n=e.value_loan_amount*l*e.value_loan_term;e.ttInterest=n,e.ttBalance=parseInt(e.value_loan_amount)+parseInt(n);for(var r=parseInt(e.value_loan_amount)+parseInt(n),i=0;i<e.value_num_of_repayments;i++){var o=new Object;o.days=1+i,o.paiddate=e.getNextWeekDay((i+1)*e.value_repayments_freq*e.value_frequency.value).toLocaleString().split(" ")[0],o.principaldue=e.value_loan_amount/e.value_num_of_repayments,o.loanamount=e.value_loan_amount,o.interest=n/e.value_num_of_repayments,o.total=o.principaldue+o.interest,r-=o.principaldue+o.interest,o.loanbalance=r,t.push(o)}}else e.method.value;e.repayments=t})),this.loading=!1)},displayAdvanceOptions:function(){this.advanced=!this.advanced},clear:function(){this.$refs.form.reset()},cancel:function(){this.datarequired=!0},getNextWeekDay:function(i){var e=new Date(Date.now());return new Date(e.getTime()+1*parseInt(i)*24*60*60*1e3)},saveRepaymentSchedule:function(){var data={name:this.name||new Date(Date.now()),amount:this.value_loan_amount,interest_rate:this.value_interest_rate,interest_method:this.interest_methods[this.method.value-1],loan_term:this.value_loan_term,loan_term_unit:this.getSelectedTerm(this.value_loan_term_unit),repaid_every:this.value_repayments_freq,repaid_every_unit:this.getSelectedTerm(this.value_frequency),number_of_repayments:this.value_num_of_repayments,amortization:"EQUAL_INSTALLMENT",interest_moratorium:parseInt(this.value_interest_moratorium)||0,principal_moratorium:parseInt(this.value_principal_moratorium)||0,interest_free_period:parseInt(this.value_interest_free_period)||0};this.$refs.forms.validate()&&this.$store.dispatch("saveSchedule",data)},getSelectedTerm:function(i){switch(i.value){case 1:return"D";case 7:return"W";case 30:return"M";case 366:return"Y"}},isEmpty:function(e){return 0===Object.keys(e).length}},mounted:function(){var e=this;if(console.log("Logging router: "),!this.isEmpty(this.$route.query)){var t=this.$route.query;console.log(this.$route.query),this.value_loan_amount=t.a,this.value_interest_rate=t.i,this.value_num_of_repayments=t.nr,this.method=this.iterest_methods.filter((function(e){return e.name==t.m}))[0],this.value_loan_term=t.lt.charAt(0),this.value_repayments_freq=t.rf.charAt(0),this.value_loan_term_unit=this.loan_terms.filter((function(e){return e.name.startsWith(t.lt.charAt(1))}))[0],this.value_frequency=this.loan_terms.filter((function(e){return e.name.startsWith(t.rf.charAt(1))}))[0],this.datarequired=!1,this.loading=!0,this.$nextTick((function(){var t=[],l=e.value_interest_rate/100;if(1==e.method.value){var n=e.value_loan_amount*l*e.value_loan_term;e.ttInterest=n,e.ttBalance=parseInt(e.value_loan_amount)+parseInt(n);for(var r=parseInt(e.value_loan_amount)+parseInt(n),i=0;i<e.value_num_of_repayments;i++){var o=new Object;o.days=1+i,o.paiddate=e.getNextWeekDay((i+1)*e.value_repayments_freq*e.value_frequency.value).toLocaleString().split(" ")[0],o.principaldue=e.value_loan_amount/e.value_num_of_repayments,o.loanamount=e.value_loan_amount,o.interest=n/e.value_num_of_repayments,o.total=o.principaldue+o.interest,r-=o.principaldue+o.interest,o.loanbalance=r,t.push(o)}}else e.method.value;e.repayments=t})),this.loading=!1}},computed:{isLoggedIn:function(){return null!=localStorage.getItem("qAccessToken")}}},o=(l(509),l(25)),c=l(32),d=l.n(c),v=l(445),_=l(451),m=l(112),f=l(458),h=l(457),y=l(461),x=l(446),k=l(486),$=l(447),C=l(476),I=l(449),w=l(462),A=l(434),S=l(455),T=l(49),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("v-app",{staticClass:"app"},[e.t?l("v-app-bar",{attrs:{dense:"",fixed:"",app:"",color:"primary"}},[l("img",{attrs:{width:"120px",src:"/kopalogo.ico",alt:"KopaSmart"}})]):e._e(),e._v(" "),l("v-container",{attrs:{fluid:""}},[l("v-layout",{attrs:{"justify-center":"","align-center":""}},[l("v-flex",[l("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[l("v-card",{staticClass:"mx-auto"},[e.datarequired?l("v-container",{attrs:{fluid:""}},[l("p",{staticClass:"subtitle-2 text-center font-weight-black"},[e._v(e._s(e.$t("label.heading.loanrepaymentschedulecalculator")))]),e._v(" "),l("v-row",{attrs:{align:"center"}},[l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Loan Amount"),dense:"",min:"0",required:"",counter:4,rules:e.numberRules},model:{value:e.value_loan_amount,callback:function(t){e.value_loan_amount=t},expression:"value_loan_amount"}})],1),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Interest Rate"),dense:"",required:"",min:"0",rules:e.numberRules},model:{value:e.value_interest_rate,callback:function(t){e.value_interest_rate=t},expression:"value_interest_rate"}})],1),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-select",{attrs:{items:e.iterest_methods,"item-text":"name","item-value":"value",rules:[function(e){return!!e||"Item is required"}],label:e.$t("label.heading.Interest Method"),required:"","persistent-hint":"","return-object":"",dense:""},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}})],1),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Loan Terms"),dense:"",required:"",min:"0",rules:e.numberRules},model:{value:e.value_loan_term,callback:function(t){e.value_loan_term=t},expression:"value_loan_term"}}),e._v(" "),l("v-spacer"),e._v(" "),l("v-select",{attrs:{items:e.loan_terms,rules:[function(e){return!!e||"Item is required"}],"item-value":"value","item-text":"name",label:e.$t("label.heading.Units"),dense:"","persistent-hint":"","return-object":""},model:{value:e.value_loan_term_unit,callback:function(t){e.value_loan_term_unit=t},expression:"value_loan_term_unit"}})],1),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Number of Repayments"),dense:"",required:"",min:"0",rules:e.numberRules},model:{value:e.value_num_of_repayments,callback:function(t){e.value_num_of_repayments=t},expression:"value_num_of_repayments"}})],1),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Repayment Frequency"),dense:"",min:"0"},model:{value:e.value_repayments_freq,callback:function(t){e.value_repayments_freq=t},expression:"value_repayments_freq"}}),e._v(" "),l("v-spacer"),e._v(" "),l("v-select",{attrs:{items:e.loan_terms,"item-text":"name","item-value":"value",label:e.$t("label.heading.Units"),rules:[function(e){return!!e||"Item is required"}],dense:"",required:"","persistent-hint":"","return-object":""},model:{value:e.value_frequency,callback:function(t){e.value_frequency=t},expression:"value_frequency"}})],1),e._v(" "),e.advanced?l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-select",{attrs:{items:e.amortizations,label:e.$t("label.heading.Amortization"),dense:""},model:{value:e.value_amortization,callback:function(t){e.value_amortization=t},expression:"value_amortization"}})],1):e._e(),e._v(" "),e.advanced?l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Interest Moratorium"),dense:"",min:"0"},model:{value:e.value_interest_moratorium,callback:function(t){e.value_interest_moratorium=t},expression:"value_interest_moratorium"}})],1):e._e(),e._v(" "),e.advanced?l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Principal Moratorium"),dense:"",min:"0"},model:{value:e.value_principal_moratorium,callback:function(t){e.value_principal_moratorium=t},expression:"value_principal_moratorium"}})],1):e._e(),e._v(" "),e.advanced?l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-text-field",{attrs:{type:"number",label:e.$t("label.heading.Interest Free Period"),dense:"",min:"0"},model:{value:e.value_interest_free_period,callback:function(t){e.value_interest_free_period=t},expression:"value_interest_free_period"}})],1):e._e(),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}}),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[l("v-spacer"),e._v(" "),l("v-btn",{attrs:{text:"",small:"",color:"primary"},on:{click:e.displayAdvanceOptions}},[e._v(e._s(e.advanced?e.$t("label.text.SHOWLESS"):e.$t("label.text.ADVANCED")))])],1)],1)],1):l("v-container",[l("v-card-title",[e._v("\n                "+e._s(e.$t("label.heading.repaymentschedule"))+"\n                "),l("v-spacer"),e._v(" "),l("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("label.heading.Search"),"hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),l("datatable-component",{staticClass:"elevation-0",attrs:{headers:e.headers,repayments:e.repayments,"items-per-page":5,search:e.search,amount:e.value_loan_amount,ttInterest:e.ttInterest,ttBalance:e.ttBalance,dense:e.dense,dark:e.dark,"multi-sort":"",loading:e.loading,"loading-text":"Loading... Please wait"}})],1),e._v(" "),l("v-row",[l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}}),e._v(" "),l("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[e._v("\n                   \n                "),e.datarequired?l("v-btn",{ref:"calculate",attrs:{color:"success",medium:"",outlined:"",depressed:"",disabled:!e.valid},on:{click:e.calculate}},[e._v(e._s(e.$t("label.button.btncalculate")))]):e._e(),e._v(" \n                "),e.datarequired?l("v-btn",{attrs:{color:"secondary",outlined:"",depressed:""},on:{click:e.clear}},[e._v(e._s(e.$t("label.button.btnclear")))]):e._e(),e._v(" \n                "),e.datarequired?e._e():l("v-btn",{attrs:{color:"error",depressed:""},on:{click:e.cancel}},[e._v(e._s(e.$t("label.button.btnback")))]),e._v(" \n                "),e.isLoggedIn?l("div",[e.datarequired?e._e():l("v-btn",{staticClass:"error lighten-1 white--text",staticStyle:{"text-transform":"capitalize"},attrs:{small:""},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v(e._s(e.$t("label.button.btnsave")))]),e._v(" \n                  "),l("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[l("v-form",{ref:"forms",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[l("v-card",[l("v-card-title",{staticClass:"headline error white--text"},[e._v(e._s(e.$t("label.message.Do you Agree"))+"?")]),e._v(" "),l("v-card-text",{staticClass:"mt-1 pt-1"},[e._v(e._s(e.$t("label.message.saveschedule")))]),e._v(" "),l("v-text-field",{staticClass:"ma-2",attrs:{filled:"",counter:10,required:"",label:e.$t("label.heading.Repayment Schedule Name"),placeholder:"e.g Bank ABC "},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),l("v-card-actions",[l("v-spacer"),e._v(" "),l("v-btn",{staticStyle:{"text-transform":"capitalize"},attrs:{color:"green darken-1",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                          "+e._s(e.$t("label.button.btnNo"))+"\n                          \n                          ")]),e._v(" "),l("v-btn",{staticClass:"warning darken-1 white--text",staticStyle:{"text-transform":"capitalize"},attrs:{outlined:"",rules:e.nameRules,disabled:!e.valid},on:{click:e.saveRepaymentSchedule}},[e._v("   "+e._s(e.$t("label.button.btnsave")))])],1)],1)],1)],1)],1):e._e(),e._v(" "),l("v-btn",{staticClass:"info lighten-1",attrs:{depressed:"",to:"/"}},[e._v(e._s(e.$t("label.button.btnhome")))])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"06d6df07",null);t.default=component.exports;d()(component,{VApp:v.a,VAppBar:_.a,VBtn:m.a,VCard:f.a,VCardActions:h.a,VCardText:h.c,VCardTitle:h.d,VCol:y.a,VContainer:x.a,VDialog:k.a,VFlex:$.a,VForm:C.a,VLayout:I.a,VRow:w.a,VSelect:A.a,VSpacer:S.a,VTextField:T.a})}}]);